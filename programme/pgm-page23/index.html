---
layout: pgm-into-new_md
title: 
id: pgm-23
url: programme/23
css: <link rel="stylesheet" type="text/css" href="../programme/pgm-page23/pgm-page23.css">
permalink: /programme/23
---
<div id="wmd-preview" class="wmd-preview"><div class="md-section-divider"></div><div class="md-section-divider"></div><h1 data-anchor-id="m4sq" id="ecmascript-2015-学习笔记">ECMAScript 2015 学习笔记</h1><div class="md-section-divider"></div><h2 data-anchor-id="hr1x" id="let-和-const">let 和 const</h2><ul data-anchor-id="frm1">
    <li>ES5只有两种声明变量的方法： <code>var</code> 命令和 <code>function</code> 命令</li>
    <li>ES6一共有6种声明变量的方法 <br>
        <ul><li><code>var</code></li>
            <li><code>function</code></li>
            <li><code>let</code></li>
            <li><code>const</code></li>
            <li><code>class</code></li>
            <li><code>import</code></li></ul></li>
</ul><div class="md-section-divider"></div><h3 data-anchor-id="gjjp" id="let">let</h3><ul data-anchor-id="9vpu">
    <li>ES6新增了<code>let</code>命令，用来声明变量。它的用法类似于<code>var</code>，但是所声明的变量，只在let命令所在的代码块内有效。</li>
    <li><p><code>for</code>循环的计数器，就很合适使用let命令</p>

        <ul><li>解决了闭包造成的常见错误（只执行最后一项）</li>
            <li>在for循环声明的变量不用担心造成命名污染</li></ul></li>
    <li><p>不存在变量提升</p>

        <ul><li>所以用let声明变量应该放到代码段的顶部</li></ul></li>
    <li><p>let不允许在相同作用域内，重复声明同一个变量</p></li>
</ul><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="wr4c"><ol class="linenums"><li class="L0"><code class="language-javascript"><span class="pln">let i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L1"><code class="language-javascript"><span class="pun">{</span></code></li><li class="L2"><code class="language-javascript"><span class="pln">     let i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln"> </span><span class="com">//如果不加let，那么外部的console.log值为1</span></code></li><li class="L3"><code class="language-javascript"><span class="pun">}</span></code></li><li class="L4"><code class="language-javascript"><span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">i</span><span class="pun">);</span><span class="pln"> </span><span class="com">//0</span></code></li></ol></pre><div class="md-section-divider"></div><h3 data-anchor-id="0w3g" id="const">const</h3><ul data-anchor-id="1jyi">
    <li>const也用来声明变量，但是声明的是常量。一旦声明，常量的值就不能改变（如:<code>const PI = 3.14159265;</code>）</li>
    <li>const的作用域与let命令相同：只在声明所在的块级作用域内有效</li>
    <li>const命令声明的常量也是不提升，只能在声明的位置后面使用</li>
    <li>对于复合类型的变量，变量名不指向数据，而是指向数据所在的地址。const命令只是保证变量名指向的地址不变，并不保证该地址的数据不变，所以将一个对象或者数组声明为常量必须非常小心</li>
</ul><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="h77u"><ol class="linenums"><li class="L0"><code class="language-javascript"><span class="kwd">const</span><span class="pln"> foo </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{};</span></code></li><li class="L1"><code class="language-javascript"><span class="pln">foo</span><span class="pun">.</span><span class="pln">prop </span><span class="pun">=</span><span class="pln"> </span><span class="lit">123</span><span class="pun">;</span></code></li><li class="L2"><code class="language-javascript"><span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">foo</span><span class="pun">.</span><span class="pln">prop</span><span class="pun">);</span><span class="pln">  </span><span class="com">// 123</span></code></li><li class="L3"><code class="language-javascript"><span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">foo</span><span class="pun">);</span><span class="pln">   </span><span class="com">// Object { prop: 123 }</span></code></li><li class="L4"><code class="language-javascript"></code></li><li class="L5"><code class="language-javascript"><span class="kwd">const</span><span class="pln"> arr </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[];</span></code></li><li class="L6"><code class="language-javascript"><span class="kwd">for</span><span class="pun">(</span><span class="pln">let i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">10</span><span class="pln"> </span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++){</span></code></li><li class="L7"><code class="language-javascript"><span class="pln">    arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> i </span><span class="pun">;</span></code></li><li class="L8"><code class="language-javascript"><span class="pun">};</span></code></li><li class="L9"><code class="language-javascript"><span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">arr</span><span class="pun">);</span><span class="pln">   </span><span class="com">// Array [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 ]</span></code></li><li class="L0"><code class="language-javascript"><span class="com">//如果将arr赋值给另一个数组会报错</span></code></li></ol></pre><ul data-anchor-id="rzda">
    <li>如果真的想将对象或者数组冻结，应该使用<code>Object.freeze</code>方法 <br>
        <ul><li>用法 <code>const arr = Object.freeze([]);</code> 或者 <code>const arr = Object.freeze({});</code></li></ul></li>
</ul><div class="md-section-divider"></div><h2 data-anchor-id="qnvu" id="块级作用域">块级作用域</h2><ul data-anchor-id="nj5h">
    <li><code>ES5</code>只有<code>全局作用域</code>和<code>函数作用域</code></li>
    <li>之所以<code>ES6</code>要引入块级作用域 <br>
        <ul><li>由于变量提升，内层变量可能会覆盖外层变量</li>
            <li>用来计数的循环变量泄露为全局变量（主要是指<code>for</code>循环）</li></ul></li>
    <li>块级作用域使外层代码块不受内层代码块的影响</li>
    <li>ES6允许块级作用域的任意嵌套</li>
    <li>外层作用域无法读取内层作用域内声明的变量，但内层作用域可以定义外层作用域的同名变量</li>
    <li>块级作用域使得立即执行函数<code>(function(){ //code})()</code>失去了意义</li>
</ul><div class="md-section-divider"></div><h2 data-anchor-id="v2di" id="class">class</h2><ul data-anchor-id="pxel">
    <li>ES6的class可以看作只是一个语法糖，它的绝大部分功能，ES5都可以做到，新的class写法只是让对象原型的写法更加清晰、更像面向对象编程的语法而已</li>
    <li>声明的类中包括一定要包含<code>constructor</code>构造方法,用来设置属性和方法</li>
</ul><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="ipyu"><ol class="linenums"><li class="L0"><code class="language-javascript"><span class="kwd">class</span><span class="pln"> singger </span><span class="pun">{</span></code></li><li class="L1"><code class="language-javascript"><span class="pln">    constructor</span><span class="pun">(</span><span class="pln">name</span><span class="pun">,</span><span class="pln">sex</span><span class="pun">){</span></code></li><li class="L2"><code class="language-javascript"><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> name </span><span class="pun">;</span></code></li><li class="L3"><code class="language-javascript"><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">sex </span><span class="pun">=</span><span class="pln">sex </span><span class="pun">;</span></code></li><li class="L4"><code class="language-javascript"><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">prop </span><span class="pun">=</span><span class="pln"> </span><span class="str">"PROP"</span><span class="pun">;</span></code></li><li class="L5"><code class="language-javascript"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L6"><code class="language-javascript"></code></li><li class="L7"><code class="language-javascript"><span class="pln">    pop</span><span class="pun">(</span><span class="pln">mark</span><span class="pun">){</span></code></li><li class="L8"><code class="language-javascript"><span class="pln">        console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name </span><span class="pun">+</span><span class="pln"> </span><span class="str">"是非常 "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> mark </span><span class="pun">+</span><span class="pln"> </span><span class="str">"的！"</span><span class="pun">);</span></code></li><li class="L9"><code class="language-javascript"><span class="pln">    </span><span class="pun">};</span></code></li><li class="L0"><code class="language-javascript"><span class="pun">}</span></code></li><li class="L1"><code class="language-javascript"></code></li><li class="L2"><code class="language-javascript"><span class="kwd">var</span><span class="pln"> zhoujielun </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> singger</span><span class="pun">(</span><span class="str">"jay-zhou"</span><span class="pln"> </span><span class="pun">,</span><span class="pln"> </span><span class="str">"male"</span><span class="pun">);</span></code></li><li class="L3"><code class="language-javascript"><span class="pln">zhoujielun</span><span class="pun">.</span><span class="pln">pop</span><span class="pun">(</span><span class="str">"popular"</span><span class="pun">);</span><span class="pln">      </span><span class="com">//jay-zhou是非常 popular的！</span></code></li><li class="L4"><code class="language-javascript"><span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">zhoujielun</span><span class="pun">.</span><span class="pln">prop</span><span class="pun">);</span><span class="pln">   </span><span class="com">//PROP</span></code></li><li class="L5"><code class="language-javascript"><span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">zhoujielun</span><span class="pun">.</span><span class="pln">name</span><span class="pun">);</span><span class="pln">   </span><span class="com">//jay-zhou</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="ziip" id="箭头函数">箭头函数</h2><ul data-anchor-id="nusm">
    <li>ES6标准新增了一种新的函数：Arrow Function（箭头函数）</li>
</ul><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="rv0y"><ol class="linenums"><li class="L0"><code class="language-javascript"><span class="pln">x </span><span class="pun">=&gt;</span><span class="pln"> x </span><span class="pun">*</span><span class="pln"> x</span><span class="pun">;</span></code></li><li class="L1"><code class="language-javascript"><span class="com">//相当于</span></code></li><li class="L2"><code class="language-javascript"><span class="kwd">function</span><span class="pun">(</span><span class="pln">x</span><span class="pun">){</span></code></li><li class="L3"><code class="language-javascript"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> x</span><span class="pun">*</span><span class="pln">x </span><span class="pun">;</span></code></li><li class="L4"><code class="language-javascript"><span class="pun">}</span></code></li></ol></pre><ul data-anchor-id="tbpf">
    <li>箭头函数相当于匿名函数，并且简化了函数定义</li>
    <li><p>箭头函数的俩种格式</p>

        <ul><li><p>第一种（只包含一个表达式，连<code>{ ... }</code>和<code>return</code>都省略掉）：</p>

            <pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-javascript"><span class="pln">x </span><span class="pun">=&gt;</span><span class="pln"> x </span><span class="pun">*</span><span class="pln"> x</span><span class="pun">;</span></code></li><li class="L1"><code class="language-javascript"><span class="com">//相当于</span></code></li><li class="L2"><code class="language-javascript"><span class="kwd">function</span><span class="pun">(</span><span class="pln">x</span><span class="pun">){</span></code></li><li class="L3"><code class="language-javascript"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> x</span><span class="pun">*</span><span class="pln">x </span><span class="pun">;</span></code></li><li class="L4"><code class="language-javascript"><span class="pun">}</span></code></li></ol></pre></li>
            <li><p>第二种（还有一种可以包含多条语句，这时候就不能省略<code>{ ... }</code> 和 <code>return</code>）：</p></li></ul>

        <pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-javascript"><span class="pln">x </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-javascript"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">x </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code class="language-javascript"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> x </span><span class="pun">*</span><span class="pln"> x</span><span class="pun">;</span></code></li><li class="L3"><code class="language-javascript"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L4"><code class="language-javascript"><span class="pln">    </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5"><code class="language-javascript"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> x </span><span class="pun">*</span><span class="pln"> x</span><span class="pun">;</span></code></li><li class="L6"><code class="language-javascript"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7"><code class="language-javascript"><span class="pun">}</span></code></li></ol></pre>

        <ul><li><p>如果参数不是一个，就需要使用<code>()</code>括起来</p>

            <pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-javascript"><span class="com">// 两个参数:</span></code></li><li class="L1"><code class="language-javascript"><span class="pun">(</span><span class="pln">x</span><span class="pun">,</span><span class="pln"> y</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> x </span><span class="pun">*</span><span class="pln"> x </span><span class="pun">+</span><span class="pln"> y </span><span class="pun">*</span><span class="pln"> y</span></code></li><li class="L2"><code class="language-javascript"></code></li><li class="L3"><code class="language-javascript"><span class="com">// 无参数:</span></code></li><li class="L4"><code class="language-javascript"><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="lit">3.14</span></code></li><li class="L5"><code class="language-javascript"></code></li><li class="L6"><code class="language-javascript"><span class="com">// 可变参数:</span></code></li><li class="L7"><code class="language-javascript"><span class="pun">(</span><span class="pln">x</span><span class="pun">,</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> </span><span class="pun">...</span><span class="pln">rest</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8"><code class="language-javascript"><span class="pln">    </span><span class="kwd">var</span><span class="pln"> i</span><span class="pun">,</span><span class="pln"> sum </span><span class="pun">=</span><span class="pln"> x </span><span class="pun">+</span><span class="pln"> y</span><span class="pun">;</span></code></li><li class="L9"><code class="language-javascript"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln">rest</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0"><code class="language-javascript"><span class="pln">        sum </span><span class="pun">+=</span><span class="pln"> rest</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span></code></li><li class="L1"><code class="language-javascript"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L2"><code class="language-javascript"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> sum</span><span class="pun">;</span></code></li><li class="L3"><code class="language-javascript"><span class="pun">}</span></code></li></ol></pre></li>
            <li><p>如果要返回一个对象，要写成 <code>x =&gt; ({ foo:x })</code> </p></li>
            <li>箭头函数中的<code>this</code> <br>
                <ul><li>箭头函数看上去是匿名函数的一种简写，但实际上，箭头函数和匿名函数有个明显的区别：箭头函数内部的<code>this</code>是词法作用域，由上下文确定</li>
                    <li>箭头函数中的<code>this</code>总是指向词法作用域 <br>
                        <ul><li>用<code>call()</code>或者<code>apply()</code>调用箭头函数时，无法对this进行绑定，即传入的第一个参数被忽略</li></ul></li></ul></li></ul></li>
</ul><div class="md-section-divider"></div><h2 data-anchor-id="isjb" id="set-和-map-数据结构"><code>Set</code> 和 <code>Map</code> 数据结构</h2><div class="md-section-divider"></div><h3 data-anchor-id="d0nt" id="set">Set</h3><ul data-anchor-id="x83j">
    <li>ES6提供了新的数据结构<code>Set</code>。它类似于数组，但是成员的值都是唯一的，没有重复的值 </li>
    <li>Set函数可以接受一个数组（或类似数组的对象）作为参数，用来初始化 <br>
        <ul><li><code>var set = new Set([1, 2, 3, 4])</code> </li></ul></li>
    <li>向Set加入值的时候，不会发生类型转换，所以<code>5</code>和<code>"5"</code>是两个不同的值。Set内部判断两个值是否不同，使用的算法叫做“Same-value equality”，它类似于精确相等运算符（<code>===</code>），主要的区别是<code>NaN</code>等于自身，而精确相等运算符认为<code>NaN</code>不等于自身</li>
</ul><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="5tys"><ol class="linenums"><li class="L0"><code class="language-javascript"><span class="pln">let </span><span class="kwd">set</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Set</span><span class="pun">();</span></code></li><li class="L1"><code class="language-javascript"></code></li><li class="L2"><code class="language-javascript"><span class="kwd">set</span><span class="pun">.</span><span class="pln">add</span><span class="pun">({})</span></code></li><li class="L3"><code class="language-javascript"><span class="kwd">set</span><span class="pun">.</span><span class="pln">size </span><span class="com">// 1</span></code></li><li class="L4"><code class="language-javascript"></code></li><li class="L5"><code class="language-javascript"><span class="kwd">set</span><span class="pun">.</span><span class="pln">add</span><span class="pun">({})</span></code></li><li class="L6"><code class="language-javascript"><span class="kwd">set</span><span class="pun">.</span><span class="pln">size </span><span class="com">// 2</span></code></li></ol></pre><ul data-anchor-id="6b99">
    <li>由于两个空对象不相等，所以它们被视为两个值</li>
    <li>Set结构的实例有以下属性 <br>
        <ul><li><code>Set.prototype.constructor</code>：构造函数，默认就是Set函数</li>
            <li><code>Set.prototype.size</code>：返回Set实例的成员总数</li></ul></li>
    <li><p>Set实例的方法分为两大类：</p>

        <ul><li><p>操作方法（用于操作数据）</p>

            <ul><li><code>add(value)</code>：添加某个值，返回Set结构本身 </li>
                <li><code>delete(value)</code>：删除某个值，返回一个布尔值，表示删除是否成功</li>
                <li><code>has(value)</code>：返回一个布尔值，表示该值是否为Set的成员</li>
                <li><code>clear()</code>：清除所有成员，没有返回值</li>
                <li><p>实例</p>

                    <pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-javascript"><span class="pln">s</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="lit">1</span><span class="pun">).</span><span class="pln">add</span><span class="pun">(</span><span class="lit">2</span><span class="pun">).</span><span class="pln">add</span><span class="pun">(</span><span class="lit">2</span><span class="pun">);</span></code></li><li class="L1"><code class="language-javascript"><span class="com">// 注意2被加入了两次</span></code></li><li class="L2"><code class="language-javascript"></code></li><li class="L3"><code class="language-javascript"><span class="pln">s</span><span class="pun">.</span><span class="pln">size </span><span class="com">// 2</span></code></li><li class="L4"><code class="language-javascript"></code></li><li class="L5"><code class="language-javascript"><span class="pln">s</span><span class="pun">.</span><span class="pln">has</span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="com">// true</span></code></li><li class="L6"><code class="language-javascript"><span class="pln">s</span><span class="pun">.</span><span class="pln">has</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="com">// true</span></code></li><li class="L7"><code class="language-javascript"><span class="pln">s</span><span class="pun">.</span><span class="pln">has</span><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span><span class="pln"> </span><span class="com">// false</span></code></li><li class="L8"><code class="language-javascript"></code></li><li class="L9"><code class="language-javascript"><span class="pln">s</span><span class="pun">.</span><span class="kwd">delete</span><span class="pun">(</span><span class="lit">2</span><span class="pun">);</span></code></li><li class="L0"><code class="language-javascript"><span class="pln">s</span><span class="pun">.</span><span class="pln">has</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="com">// false</span></code></li></ol></pre></li>
                <li><p><code>Array.form</code>方法可以将<code>Set结构</code>转为<code>数组</code></p>

                    <pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-javascript"><span class="kwd">var</span><span class="pln"> items </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Set</span><span class="pun">([</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">]);</span></code></li><li class="L1"><code class="language-javascript"><span class="kwd">var</span><span class="pln"> array </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Array</span><span class="pun">.</span><span class="pln">from</span><span class="pun">(</span><span class="pln">items</span><span class="pun">);</span></code></li></ol></pre>

                    <ul><li>这就提供了一种去除数组的重复元素的方法 <br>
                        <pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-javascript"><span class="kwd">function</span><span class="pln"> dedupe</span><span class="pun">(</span><span class="pln">array</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-javascript"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Array</span><span class="pun">.</span><span class="pln">from</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Set</span><span class="pun">(</span><span class="pln">array</span><span class="pun">));</span></code></li><li class="L2"><code class="language-javascript"><span class="pun">}</span></code></li><li class="L3"><code class="language-javascript"></code></li><li class="L4"><code class="language-javascript"><span class="pln">dedupe</span><span class="pun">([</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">])</span><span class="pln"> </span><span class="com">// [1, 2, 3]</span></code></li></ol></pre></li></ul></li></ul></li>
            <li><p>遍历方法（用于遍历成员）</p>

                <ul><li><p>Set结构的实例有四个遍历方法，可以用于遍历成员</p>

                    <ul><li><code>keys()</code>：返回一个键名的遍历器</li>
                        <li><code>values()</code>：返回一个键值的遍历器</li>
                        <li><code>entries()</code>：返回一个键值对的遍历器</li>
                        <li><code>forEach()</code>：使用回调函数遍历每个成员</li>
                        <li>实例 <br>
                            <pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-javascript"><span class="pln">let </span><span class="kwd">set</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Set</span><span class="pun">([</span><span class="str">'red'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'green'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'blue'</span><span class="pun">]);</span></code></li><li class="L1"><code class="language-javascript"></code></li><li class="L2"><code class="language-javascript"><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> let item of </span><span class="kwd">set</span><span class="pun">.</span><span class="pln">keys</span><span class="pun">()</span><span class="pln"> </span><span class="pun">){</span></code></li><li class="L3"><code class="language-javascript"><span class="pln">  console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">item</span><span class="pun">);</span></code></li><li class="L4"><code class="language-javascript"><span class="pun">}</span></code></li><li class="L5"><code class="language-javascript"><span class="com">// red</span></code></li><li class="L6"><code class="language-javascript"><span class="com">// green</span></code></li><li class="L7"><code class="language-javascript"><span class="com">// blue</span></code></li><li class="L8"><code class="language-javascript"></code></li><li class="L9"><code class="language-javascript"><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> let item of </span><span class="kwd">set</span><span class="pun">.</span><span class="pln">values</span><span class="pun">()</span><span class="pln"> </span><span class="pun">){</span></code></li><li class="L0"><code class="language-javascript"><span class="pln">  console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">item</span><span class="pun">);</span></code></li><li class="L1"><code class="language-javascript"><span class="pun">}</span></code></li><li class="L2"><code class="language-javascript"><span class="com">// red</span></code></li><li class="L3"><code class="language-javascript"><span class="com">// green</span></code></li><li class="L4"><code class="language-javascript"><span class="com">// blue</span></code></li><li class="L5"><code class="language-javascript"></code></li><li class="L6"><code class="language-javascript"><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> let item of </span><span class="kwd">set</span><span class="pun">.</span><span class="pln">entries</span><span class="pun">()</span><span class="pln"> </span><span class="pun">){</span></code></li><li class="L7"><code class="language-javascript"><span class="pln">  console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">item</span><span class="pun">);</span></code></li><li class="L8"><code class="language-javascript"><span class="pun">}</span></code></li><li class="L9"><code class="language-javascript"><span class="com">// ["red", "red"]</span></code></li><li class="L0"><code class="language-javascript"><span class="com">// ["green", "green"]</span></code></li><li class="L1"><code class="language-javascript"><span class="com">// ["blue", "blue"]</span></code></li></ol></pre></li></ul></li></ul></li></ul></li>
    <li><p>Map</p>

        <ul><li>JavaScript的对象（Object），本质上是键值对的集合（Hash结构），但是只能用字符串当作键。这给它的使用带来了很大的限制,为了解决这个问题，ES6提供了Map数据结构。它类似于对象，也是键值对的集合，但是“键”的范围不限于字符串，各种类型的值（包括对象）都可以当作键。也就是说，Object结构提供了“字符串—值”的对应，Map结构提供了“值—值”的对应，是一种更完善的Hash结构实现</li>
            <li><p>Map结构的实例有以下属性和操作方法</p>

                <ul><li><p><code>size</code>属性</p>

                    <ul><li><p><code>size</code>属性返回Map结构的成员总数   </p>

                        <pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-javascript"><span class="pln">let map </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">();</span></code></li><li class="L1"><code class="language-javascript"><span class="pln">map</span><span class="pun">.</span><span class="kwd">set</span><span class="pun">(</span><span class="str">'foo'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">);</span></code></li><li class="L2"><code class="language-javascript"><span class="pln">map</span><span class="pun">.</span><span class="kwd">set</span><span class="pun">(</span><span class="str">'bar'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">);</span></code></li><li class="L3"><code class="language-javascript"></code></li><li class="L4"><code class="language-javascript"><span class="pln">map</span><span class="pun">.</span><span class="pln">size </span><span class="com">// 2</span></code></li></ol></pre></li>
                        <li><p><code>set(key, value)</code></p>

                            <ul><li><p>set方法设置key所对应的键值，然后返回整个Map结构。如果key已经有值，则键值会被更新，否则就新生成该键</p>

                                <pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-javascript"><span class="kwd">var</span><span class="pln"> m </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">();</span></code></li><li class="L1"><code class="language-javascript"></code></li><li class="L2"><code class="language-javascript"><span class="pln">m</span><span class="pun">.</span><span class="kwd">set</span><span class="pun">(</span><span class="str">"edition"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">)</span><span class="pln">        </span><span class="com">// 键是字符串</span></code></li><li class="L3"><code class="language-javascript"><span class="pln">m</span><span class="pun">.</span><span class="kwd">set</span><span class="pun">(</span><span class="lit">262</span><span class="pun">,</span><span class="pln"> </span><span class="str">"standard"</span><span class="pun">)</span><span class="pln">     </span><span class="com">// 键是数值</span></code></li><li class="L4"><code class="language-javascript"><span class="pln">m</span><span class="pun">.</span><span class="kwd">set</span><span class="pun">(</span><span class="kwd">undefined</span><span class="pun">,</span><span class="pln"> </span><span class="str">"nah"</span><span class="pun">)</span><span class="pln">    </span><span class="com">// 键是undefined</span></code></li></ol></pre></li>
                                <li><p><code>set</code> 方法返回的是Map本身，因此可以采用链式写法</p>

                                    <pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-javascript"><span class="pln">let map </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">()</span></code></li><li class="L1"><code class="language-javascript"><span class="pln">  </span><span class="pun">.</span><span class="kwd">set</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="str">'a'</span><span class="pun">)</span></code></li><li class="L2"><code class="language-javascript"><span class="pln">  </span><span class="pun">.</span><span class="kwd">set</span><span class="pun">(</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">)</span></code></li><li class="L3"><code class="language-javascript"><span class="pln">  </span><span class="pun">.</span><span class="kwd">set</span><span class="pun">(</span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="str">'c'</span><span class="pun">);</span></code></li></ol></pre></li></ul></li>
                        <li><p><code>get(key)</code></p>

                            <ul><li><code>get</code>方法读取<code>key</code>对应的键值，如果找不到<code>key</code>，返回<code>undefined</code> <br>
                                <pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-javascript"><span class="kwd">var</span><span class="pln"> m </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">();</span></code></li><li class="L1"><code class="language-javascript"></code></li><li class="L2"><code class="language-javascript"><span class="kwd">var</span><span class="pln"> hello </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">"hello"</span><span class="pun">);}</span></code></li><li class="L3"><code class="language-javascript"><span class="pln">m</span><span class="pun">.</span><span class="kwd">set</span><span class="pun">(</span><span class="pln">hello</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Hello ES6!"</span><span class="pun">)</span><span class="pln"> </span><span class="com">// 键是函数</span></code></li><li class="L4"><code class="language-javascript"></code></li><li class="L5"><code class="language-javascript"><span class="pln">m</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="pln">hello</span><span class="pun">)</span><span class="pln">  </span><span class="com">// Hello ES6!</span></code></li></ol></pre></li></ul></li>
                        <li><p><code>has(key)</code></p>

                            <ul><li><code>has</code>方法返回一个布尔值，表示某个键是否在Map数据结构中 <br>
                                <pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-javascript"><span class="kwd">var</span><span class="pln"> m </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">();</span></code></li><li class="L1"><code class="language-javascript"></code></li><li class="L2"><code class="language-javascript"><span class="pln">m</span><span class="pun">.</span><span class="kwd">set</span><span class="pun">(</span><span class="str">"edition"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">);</span></code></li><li class="L3"><code class="language-javascript"><span class="pln">m</span><span class="pun">.</span><span class="kwd">set</span><span class="pun">(</span><span class="lit">262</span><span class="pun">,</span><span class="pln"> </span><span class="str">"standard"</span><span class="pun">);</span></code></li><li class="L4"><code class="language-javascript"><span class="pln">m</span><span class="pun">.</span><span class="kwd">set</span><span class="pun">(</span><span class="kwd">undefined</span><span class="pun">,</span><span class="pln"> </span><span class="str">"nah"</span><span class="pun">);</span></code></li><li class="L5"><code class="language-javascript"></code></li><li class="L6"><code class="language-javascript"><span class="pln">m</span><span class="pun">.</span><span class="pln">has</span><span class="pun">(</span><span class="str">"edition"</span><span class="pun">)</span><span class="pln">     </span><span class="com">// true</span></code></li><li class="L7"><code class="language-javascript"><span class="pln">m</span><span class="pun">.</span><span class="pln">has</span><span class="pun">(</span><span class="str">"years"</span><span class="pun">)</span><span class="pln">       </span><span class="com">// false</span></code></li><li class="L8"><code class="language-javascript"><span class="pln">m</span><span class="pun">.</span><span class="pln">has</span><span class="pun">(</span><span class="lit">262</span><span class="pun">)</span><span class="pln">           </span><span class="com">// true</span></code></li><li class="L9"><code class="language-javascript"><span class="pln">m</span><span class="pun">.</span><span class="pln">has</span><span class="pun">(</span><span class="kwd">undefined</span><span class="pun">)</span><span class="pln">     </span><span class="com">// true</span></code></li></ol></pre></li></ul></li>
                        <li><p>delete(key)</p>

                            <ul><li><code>delete</code>方法删除某个键，返回<code>true</code>。如果删除失败，返回<code>false</code> <br>
                                <pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-javascript"><span class="kwd">var</span><span class="pln"> m </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">();</span></code></li><li class="L1"><code class="language-javascript"><span class="pln">m</span><span class="pun">.</span><span class="kwd">set</span><span class="pun">(</span><span class="kwd">undefined</span><span class="pun">,</span><span class="pln"> </span><span class="str">"nah"</span><span class="pun">);</span></code></li><li class="L2"><code class="language-javascript"><span class="pln">m</span><span class="pun">.</span><span class="pln">has</span><span class="pun">(</span><span class="kwd">undefined</span><span class="pun">)</span><span class="pln">     </span><span class="com">// true</span></code></li><li class="L3"><code class="language-javascript"></code></li><li class="L4"><code class="language-javascript"><span class="pln">m</span><span class="pun">.</span><span class="kwd">delete</span><span class="pun">(</span><span class="kwd">undefined</span><span class="pun">)</span></code></li><li class="L5"><code class="language-javascript"><span class="pln">m</span><span class="pun">.</span><span class="pln">has</span><span class="pun">(</span><span class="kwd">undefined</span><span class="pun">)</span><span class="pln">       </span><span class="com">// false</span></code></li></ol></pre></li></ul></li>
                        <li><p>clear()</p>

                            <ul><li><code>clear</code>方法清除所有成员，没有返回值 <br>
                                <pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-javascript"><span class="pln">let map </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">();</span></code></li><li class="L1"><code class="language-javascript"><span class="pln">map</span><span class="pun">.</span><span class="kwd">set</span><span class="pun">(</span><span class="str">'foo'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">);</span></code></li><li class="L2"><code class="language-javascript"><span class="pln">map</span><span class="pun">.</span><span class="kwd">set</span><span class="pun">(</span><span class="str">'bar'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">);</span></code></li><li class="L3"><code class="language-javascript"></code></li><li class="L4"><code class="language-javascript"><span class="pln">map</span><span class="pun">.</span><span class="pln">size </span><span class="com">// 2</span></code></li><li class="L5"><code class="language-javascript"><span class="pln">map</span><span class="pun">.</span><span class="pln">clear</span><span class="pun">()</span></code></li><li class="L6"><code class="language-javascript"><span class="pln">map</span><span class="pun">.</span><span class="pln">size </span><span class="com">// 0</span></code></li></ol></pre></li></ul></li></ul></li></ul></li>
            <li>遍历方法 <br>
                <ul><li>Map原生提供三个遍历器生成函数和一个遍历方法。 <br>
                    <ul><li><code>keys()</code>：返回键名的遍历器。</li>
                        <li><code>values()</code>：返回键值的遍历器。</li>
                        <li><code>entries()</code>：返回所有成员的遍历器。</li>
                        <li><code>forEach()</code>：遍历Map的所有成员</li></ul></li></ul></li>
            <li><p>与其他数组结构的互相转换</p>

                <ul><li><p>Map转为数组</p>

                    <ul><li>Map转为数组最方便的方法，就是使用扩展运算符<code>（...）</code></li></ul>

                    <pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-javascript"><span class="pln">let myMap </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">().</span><span class="kwd">set</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">).</span><span class="kwd">set</span><span class="pun">({</span><span class="pln">foo</span><span class="pun">:</span><span class="pln"> </span><span class="lit">3</span><span class="pun">},</span><span class="pln"> </span><span class="pun">[</span><span class="str">'abc'</span><span class="pun">]);</span></code></li><li class="L1"><code class="language-javascript"><span class="pun">[...</span><span class="pln">myMap</span><span class="pun">]</span></code></li><li class="L2"><code class="language-javascript"><span class="com">// [ [ true, 7 ], [ { foo: 3 }, [ 'abc' ] ] ]</span></code></li></ol></pre></li>
                    <li><p>数组转为Map</p>

                        <ul><li>将数组转入Map构造函数，就可以转为Map</li></ul>

                        <pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-javascript"><span class="kwd">new</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">([[</span><span class="kwd">true</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[{</span><span class="pln">foo</span><span class="pun">:</span><span class="pln"> </span><span class="lit">3</span><span class="pun">},</span><span class="pln"> </span><span class="pun">[</span><span class="str">'abc'</span><span class="pun">]]])</span></code></li><li class="L1"><code class="language-javascript"><span class="com">// Map {true =&gt; 7, Object {foo: 3} =&gt; ['abc']}</span></code></li></ol></pre></li>
                    <li><p>Map转为对象</p>

                        <ul><li>如果所有Map的键都是字符串，它可以转为对象</li></ul>

                        <pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-javascript"><span class="kwd">function</span><span class="pln"> strMapToObj</span><span class="pun">(</span><span class="pln">strMap</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-javascript"><span class="pln">    let obj </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Object</span><span class="pun">.</span><span class="pln">create</span><span class="pun">(</span><span class="kwd">null</span><span class="pun">);</span></code></li><li class="L2"><code class="language-javascript"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="pln">let </span><span class="pun">[</span><span class="pln">k</span><span class="pun">,</span><span class="pln">v</span><span class="pun">]</span><span class="pln"> of strMap</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3"><code class="language-javascript"><span class="pln">        obj</span><span class="pun">[</span><span class="pln">k</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> v</span><span class="pun">;</span></code></li><li class="L4"><code class="language-javascript"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L5"><code class="language-javascript"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> obj</span><span class="pun">;</span></code></li><li class="L6"><code class="language-javascript"><span class="pun">}</span></code></li><li class="L7"><code class="language-javascript"></code></li><li class="L8"><code class="language-javascript"><span class="pln">let myMap </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">().</span><span class="kwd">set</span><span class="pun">(</span><span class="str">'yes'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">).</span><span class="kwd">set</span><span class="pun">(</span><span class="str">'no'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">);</span></code></li><li class="L9"><code class="language-javascript"><span class="pln">strMapToObj</span><span class="pun">(</span><span class="pln">myMap</span><span class="pun">)</span></code></li><li class="L0"><code class="language-javascript"><span class="com">// { yes: true, no: false }</span></code></li></ol></pre></li>
                    <li><p>对象转为Map</p>

                        <pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-javascript"><span class="kwd">function</span><span class="pln"> objToStrMap</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-javascript"><span class="pln">  let strMap </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">();</span></code></li><li class="L2"><code class="language-javascript"><span class="pln">  </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="pln">let k of </span><span class="typ">Object</span><span class="pun">.</span><span class="pln">keys</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3"><code class="language-javascript"><span class="pln">    strMap</span><span class="pun">.</span><span class="kwd">set</span><span class="pun">(</span><span class="pln">k</span><span class="pun">,</span><span class="pln"> obj</span><span class="pun">[</span><span class="pln">k</span><span class="pun">]);</span></code></li><li class="L4"><code class="language-javascript"><span class="pln">  </span><span class="pun">}</span></code></li><li class="L5"><code class="language-javascript"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> strMap</span><span class="pun">;</span></code></li><li class="L6"><code class="language-javascript"><span class="pun">}</span></code></li><li class="L7"><code class="language-javascript"></code></li><li class="L8"><code class="language-javascript"><span class="pln">objToStrMap</span><span class="pun">({</span><span class="pln">yes</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span><span class="pln"> no</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">})</span></code></li><li class="L9"><code class="language-javascript"><span class="com">// [ [ 'yes', true ], [ 'no', false ] ]</span></code></li></ol></pre></li>
                    <li><p>Map转为JSON</p>

                        <ul><li>Map转为JSON要区分两种情况。一种情况是，Map的键名都是字符串，这时可以选择转为对象JSON <br>
                            <pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-javascript"><span class="kwd">function</span><span class="pln"> strMapToJson</span><span class="pun">(</span><span class="pln">strMap</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-javascript"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> JSON</span><span class="pun">.</span><span class="pln">stringify</span><span class="pun">(</span><span class="pln">strMapToObj</span><span class="pun">(</span><span class="pln">strMap</span><span class="pun">));</span></code></li><li class="L2"><code class="language-javascript"><span class="pun">}</span></code></li><li class="L3"><code class="language-javascript"></code></li><li class="L4"><code class="language-javascript"><span class="pln">let myMap </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">().</span><span class="kwd">set</span><span class="pun">(</span><span class="str">'yes'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">).</span><span class="kwd">set</span><span class="pun">(</span><span class="str">'no'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">);</span></code></li><li class="L5"><code class="language-javascript"><span class="pln">strMapToJson</span><span class="pun">(</span><span class="pln">myMap</span><span class="pun">)</span></code></li><li class="L6"><code class="language-javascript"><span class="com">// '{"yes":true,"no":false}'</span></code></li><li class="L7"><code class="language-javascript"><span class="pun">*</span><span class="pln"> </span><span class="pun">另一种情况是，</span><span class="typ">Map</span><span class="pun">的键名有非字符串，这时可以选择转为数组</span><span class="pln">JSON</span></code></li><li class="L8"><code class="language-javascript"><span class="pun">```</span><span class="pln">javascript</span></code></li><li class="L9"><code class="language-javascript"><span class="kwd">function</span><span class="pln"> mapToArrayJson</span><span class="pun">(</span><span class="pln">map</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0"><code class="language-javascript"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> JSON</span><span class="pun">.</span><span class="pln">stringify</span><span class="pun">([...</span><span class="pln">map</span><span class="pun">]);</span></code></li><li class="L1"><code class="language-javascript"><span class="pun">}</span></code></li><li class="L2"><code class="language-javascript"></code></li><li class="L3"><code class="language-javascript"><span class="pln">let myMap </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">().</span><span class="kwd">set</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">).</span><span class="kwd">set</span><span class="pun">({</span><span class="pln">foo</span><span class="pun">:</span><span class="pln"> </span><span class="lit">3</span><span class="pun">},</span><span class="pln"> </span><span class="pun">[</span><span class="str">'abc'</span><span class="pun">]);</span></code></li><li class="L4"><code class="language-javascript"><span class="pln">mapToArrayJson</span><span class="pun">(</span><span class="pln">myMap</span><span class="pun">)</span></code></li><li class="L5"><code class="language-javascript"><span class="com">// '[[true,7],[{"foo":3},["abc"]]]'</span></code></li></ol></pre></li></ul></li>
                    <li><p>JSON转为Map</p>

                        <ul><li><p>JSON转为Map，正常情况下，所有键名都是字符串</p>

                            <pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-javascript"><span class="kwd">function</span><span class="pln"> jsonToStrMap</span><span class="pun">(</span><span class="pln">jsonStr</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-javascript"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> objToStrMap</span><span class="pun">(</span><span class="pln">JSON</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="pln">jsonStr</span><span class="pun">));</span></code></li><li class="L2"><code class="language-javascript"><span class="pun">}</span></code></li><li class="L3"><code class="language-javascript"></code></li><li class="L4"><code class="language-javascript"><span class="pln">jsonToStrMap</span><span class="pun">(</span><span class="str">'{"yes":true,"no":false}'</span><span class="pun">)</span></code></li><li class="L5"><code class="language-javascript"><span class="com">// Map {'yes' =&gt; true, 'no' =&gt; false}</span></code></li></ol></pre></li>
                            <li><p>但是，有一种特殊情况，整个JSON就是一个数组，且每个数组成员本身，又是一个有两个成员的数组。这时，它可以一一对应地转为Map。这往往是数组转为JSON的逆操作</p>

                                <pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-javascript"><span class="kwd">function</span><span class="pln"> jsonToMap</span><span class="pun">(</span><span class="pln">jsonStr</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-javascript"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">(</span><span class="pln">JSON</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="pln">jsonStr</span><span class="pun">));</span></code></li><li class="L2"><code class="language-javascript"><span class="pun">}</span></code></li><li class="L3"><code class="language-javascript"></code></li><li class="L4"><code class="language-javascript"><span class="pln">jsonToMap</span><span class="pun">(</span><span class="str">'[[true,7],[{"foo":3},["abc"]]]'</span><span class="pun">)</span></code></li><li class="L5"><code class="language-javascript"><span class="com">// Map {true =&gt; 7, Object {foo: 3} =&gt; ['abc']}</span></code></li></ol></pre></li></ul></li></ul></li></ul></li>
</ul></div>