---
layout: pgm-into
title: jQuery实现AJAX的几种方法
id: pgm-15
url: programme/15
css: <link rel="stylesheet" type="text/css" href="../programme/pgm-page15/pgm-page15.css">
permalink: /programme/15
---

        <h1>jQuery实现AJAX的几种方法</h1>
        <ol>
            <li>
                <strong>load()</strong>方法
                <ul>
                    <li>解释：使用<code>load()</code>方法通过Ajax请求加载服务器中的数据，并把返回的数据放置到指定的元素中</li>
                    <li>
                        语法：<code>$(selector).load(URL,data,callback);</code>
                        <ul>
                            <li>必需的 URL 参数规定您希望加载的 URL</li>
                            <li>可选的 data 参数规定与请求一同发送的查询字符串键/值对集合</li>
                            <li>可选的 callback 参数是 load() 方法完成后所执行的函数名称</li>
                            <li><code>$(selector).html()</code>就是服务器返回给指定元素的数据</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li>
                <p><strong>getJSON()</strong>方法</p>
                <ul>
                    <li>解释：通过 HTTP GET 请求载入 JSON 数据</li>
                    <li>
                        语法：<code>jQuery.getJSON(url,data,success(data,status,xhr))</code>或者<code>$.getJSON(url,data,success(data,status,xhr))</code>
                        <ul>
                            <li><code>url</code> - 必需 规定将请求发送的哪个 URL。</li>
                            <li><code>data</code> -  可选 规定连同请求发送到服务器的数据。</li>
                            <li>
                                <code>success(data,status,xhr)</code> - 可选 规定当请求成功时运行的函数
                                <ul>
                                    <li>
                                        额外的参数：
                                        <ul>
                                            <li><code>response</code> - 包含来自请求的结果数据</li>
                                            <li><code>status</code> - 包含请求的状态</li>
                                            <li><code>xhr</code> - 包含 XMLHttpRequest 对象</li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <p>详细说明 - 该函数是简写的Ajax函数，等价于</p>
<pre><code>$.ajax({
  url: url,
  data: data,
  success: callback,
  dataType: json
});
</code></pre>

                        <ul>
                            <li>
                                传递给 callback 的返回数据，可以是 JavaScript 对象，或以 JSON 结构定义的数组，并使用 <code>$.parseJSON()</code> 方法进行解析。
                                <ul>
                                    <li><code>$.parseJSON()</code>是jQuery解析json的一种方法</li>
                                </ul>
                            </li>
                            <li>可以使用<code>$.each(data,funvtion(i,n){})</code>来遍历返回的数据</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li>
                <p><strong>getScript()</strong>方法</p>
                <ul>
                    <li>解释： <code>getScript()</code> 方法通过 HTTP <code>GET</code> 请求载入并执行 JavaScript 文件</li>
                    <li>
                        语法： <code>jQuery.getScript(url,success(response,status))</code>或者<code>$.getScript(url,success(response,status))</code>。回调函数不常用 ，<code>$.getScript(url)</code>即可
                        <ul>
                            <li>url - 必选 将要请求的 URL 字符串。</li>
                            <li>
                                success(response,status) - 可选 规定请求成功后执行的回调函数
                                <ul>
                                    <li>
                                        额外的参数(传入的参数名字如<code>response</code>,<code>status</code>无所谓，顺序重要)：
                                        <ul>
                                            <li><code>response</code> - 包含来自请求的结果数据</li>
                                            <li><code>status</code> - 包含请求的状态（&quot;success&quot;, &quot;notmodified&quot;, &quot;error&quot;, &quot;timeout&quot; 或 &quot;parsererror&quot;）</li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <p>详细说明 - 该函数是简写的 Ajax 函数，等价于：</p>
<pre><code>$.ajax({
  url: url,
  dataType: &quot;script&quot;,
  success: success
});
</code></pre>

                        <ul>
                            <li><code>getScript()</code>方法加载服务器中的JavaScript格式文件后，自动执行文件代码</li>
                            <li>载入的脚本在全局环境中执行，因此能够引用其他变量，并使用 jQuery 函数</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li>
                <p><strong>get()</strong>方法</p>
                <ul>
                    <li>解释：采用GET方式向服务器请求数据，并通过方法中回调函数的参数返回请求的数据。如果需要在出错时执行函数，请使用 $.ajax。</li>
                    <li>
                        语法：<code>$(selector).get(url,data,success(response,status,xhr),dataType)</code>或者常用的<code>$.get(url,[callback])</code>
                        <ul>
                            <li>url - 必需 规定将请求发送的哪个 URL</li>
                            <li>data - 可选 规定连同请求发送到服务器的数据</li>
                            <li>
                                success(response,status,xhr) - 可选 规定当请求成功时运行的函数
                                <ul>
                                    <li>
                                        额外的参数：
                                        <ul>
                                            <li><code>response</code> - 包含来自请求的结果数据</li>
                                            <li><code>status</code> - 包含请求的状态</li>
                                            <li><code>xhr</code> - 包含 XMLHttpRequest 对象</li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                dataType - 可选 规定预计的服务器响应的数据类型(默认地，jQuery 将智能判断)
                                <ul>
                                    <li>
                                        可能的类型：
                                        <ul>
                                            <li><code>xml</code></li>
                                            <li><code>html</code></li>
                                            <li><code>text</code></li>
                                            <li><code>script</code></li>
                                            <li><code>json</code></li>
                                            <li><code>jsonp</code></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <p>详细说明 - 该函数是简写的 Ajax 函数，等价于：</p>
<pre><code>$.ajax({
  url: url,
  data: data,
  success: success,
  dataType: dataType
});
</code></pre>

                        <ul>
                            <li>根据响应的不同的 MIME 类型，传递给 success 回调函数的返回数据也有所不同，这些数据可以是 XML root 元素、文本字符串、JavaScript 文件或者 JSON 对象。也可向 success 回调函数传递响应的文本状态。</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li>
                <p><strong>post()</strong>方法</p>
                <ul>
                    <li>解释： 与<code>get()</code>方法相比，<code>post()</code>方法多用于以<code>POST</code>方式向服务器发送数据，服务器接收到数据之后，进行处理，并将处理结果返回页面</li>
                    <li>
                        语法： <code>jQuery.post(url,data,success(data, textStatus, jqXHR),dataType)</code>或者常用写法<code>$.post(url,[data],[callback])</code>
                        <ul>
                            <li>url - 必需 规定把请求发送到哪个 URL</li>
                            <li>data - 可选 映射或字符串值。规定连同请求发送到服务器的数据</li>
                            <li>success(data, textStatus, jqXHR) - 可选 请求成功时执行的回调函数</li>
                            <li>dataType - 可选 规定预期的服务器响应的数据类型【默认执行智能判断（xml、json、script 或 html】</li>
                        </ul>
                    </li>
                    <li>
                        <p>详细说明 - 该函数是简写的 Ajax 函数，等价于：</p>
<pre><code>$.ajax({
  type: 'POST',
  url: url,
  data: data,
  success: success,
  dataType: dataType
});
</code></pre>

                        <p>例：</p>
<pre><code>    $.post(&quot;http://www.imooc.com/data/check_f.php&quot;,{
            num:$(&quot;#txtNumber&quot;).val()
        },
            function (data) {
                 $(&quot;ul&quot;).append(&quot;&lt;li&gt;你输入的&lt;b&gt;  &quot;
                 + $(&quot;#txtNumber&quot;).val() + &quot; &lt;/b&gt;是&lt;b&gt; &quot;
                 + data + &quot; &lt;/b&gt;&lt;/li&gt;&quot;);
    });
</code></pre>

                    </li>
                </ul>
            </li>
            <li>
                <p><strong>ajax方法</strong> </p>
                <ul>
                    <li>
                        解释：<code>ajax()</code>方法通过 HTTP 请求加载远程数据。
                        <ul>
                            <li>该方法是 jQuery 底层 AJAX 实现。简单易用的高层实现见 $.get, $.post 等。$.ajax() 返回其创建的 XMLHttpRequest 对象。大多数情况下你无需直接操作该函数，除非你需要操作不常用的选项，以获得更多的灵活性</li>
                            <li>最简单的情况下，$.ajax() 可以不带任何参数直接使用</li>
                            <li><strong>NOTICE:</strong> 所有的选项都可以通过 <code>$.ajaxSetup()</code> 函数来全局设置</li>
                        </ul>
                    </li>
                    <li>
                        语法：<code>jQuery.ajax([settings])</code>或<code>$.ajax([settings])</code>
                        <ul>
                            <li>
                                常用配置项
                                <ul>
                                    <li>
                                        参数settings为发送ajax请求时的配置对象，在该对象中
                                        <ul>
                                            <li>url - 表示服务器请求的路径</li>
                                            <li>data - 为请求时传递的数据</li>
                                            <li>dataType - 为服务器返回的数据类型</li>
                                            <li>success - 为请求成功的执行的回调函数</li>
                                            <li>type - 为发送数据请求的方式，默认为get</li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <p>例：</p>
<pre><code>var servertime ;
function serverTime(){
    $.ajax({
            type:&quot;get&quot;,
            url:&quot;/getservertime.asp&quot;,
            success: function(data){
            var str=String(data);
            var data1=str.replace(/-/g, &quot;/&quot;);   //用正则表达式将2015-05-12 16:27:34的格式替换成2015/05/12 16:27:34
            var data2 = new Date(data1).getTime();  
                servertime = data2;}});}
function charLeftAll(n){
    if(n &lt; 10){return &quot;0&quot; + n;}else{return n;}}
function timer(){  
    var EndTime= new Date('2015/05/20 00:00:00');
    var NowTime =servertime;
    var ts = EndTime.getTime() - NowTime;//计算剩余的毫秒数  
    var dd = parseInt(ts / 1000 / 60 / 60 / 24, 10);//计算剩余的天数  
    var hh = parseInt(ts / 1000 / 60 / 60 % 24, 10); //计算剩余的小时数  
    var mm = parseInt(ts / 1000 / 60 % 60, 10);//计算剩余的分钟数  
    var ss = parseInt(ts / 1000 % 60, 10); //计算剩余的秒数  
    document.getElementById('day').innerHTML=charLeftAll(dd);
    document.getElementById('hour').innerHTML=charLeftAll(hh);
    document.getElementById('minute').innerHTML=charLeftAll(mm);
    document.getElementById('second').innerHTML=charLeftAll(ss);
    setInterval(serverTime,1000);  
     }   
}
</code></pre>

                    </li>
                </ul>
            </li>
        </ol>
        <h2><strong><em>其它</em></strong></h2>
        <ul>
            <li>
                <p><strong>ajaxSetup() 方法</strong></p>
                <ul>
                    <li>解释： 使用ajaxSetup()方法可以设置Ajax请求的一些全局性选项值，设置完成后，后面的Ajax请求将不需要再添加这些选项值</li>
                    <li>
                        语法： <code>jQuery.ajaxSetup([options])</code>或<code>$.ajaxSetup([options])</code>
                        <ul>
                            <li>可选项<code>options</code>参数为一个对象，通过该对象设置Ajax请求时的全局选项值</li>
                        </ul>
                    </li>
                    <li>
                        <p>例：</p>
                        <ul>
                            <li>
                                <p>设置 AJAX 请求默认地址为 &quot;/xmlhttp/&quot;，禁止触发全局 AJAX 事件，用 POST 代替默认 GET 方法。其后的 AJAX 请求不再设置任何选项参数：</p>
<pre><code>$.ajaxSetup({
  url: &quot;/xmlhttp/&quot;,
  global: false,
  type: &quot;POST&quot;
});
$.ajax({ data: myData });
</code></pre>

                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li>
                <p><strong>ajaxStart()和ajaxStop()方法</strong></p>
                <ul>
                    <li>
                        解释
                        <ul>
                            <li>ajaxStart()方法用于在Ajax请求发出前触发函数</li>
                            <li>ajaxStop()方法用于在Ajax请求完成后触发函数</li>
                        </ul>
                    </li>
                    <li>
                        语法：
                        <ul>
                            <li><code>$(selector).ajaxStart(function())</code></li>
                            <li><code>$(selector).ajaxStop(function())</code></li>
                        </ul>
                    </li>
                    <li>
                        <p>例： </p>
                        <ul>
                            <li>
                                <p>在调用<code>ajax()</code>方法请求服务器数据前，使用动画显示正在加载中，当请求成功后，该动画自动隐藏</p>
<pre><code>&lt;div id=&quot;divtest&quot;&gt;
    &lt;div class=&quot;title&quot;&gt;
        &lt;span class=&quot;fl&quot;&gt;加载一段文字&lt;/span&gt;
        &lt;span class=&quot;fr&quot;&gt;
            &lt;input type=&quot;button&quot; id=&quot;btnShow&quot; value=&quot;加载&quot;&gt;
        &lt;/span&gt;
    &lt;/div&gt;
    &lt;ul&gt;
        &lt;li id=&quot;divload&quot;&gt;
            &lt;img src=&quot;Imges/Loading.gif&quot; alt=&quot;&quot;&gt;
        &lt;/li&gt;
    &lt;/ul&gt;
&lt;/div&gt;
&lt;script&gt;
    $(function(){
        $(&quot;#divload&quot;).ajaxStart( function(){$(this).show();});
        $(&quot;#divload&quot;).ajaxStop( function(){ $(this).hide() };);
        $(&quot;#divload&quot;).bind(&quot;click&quot;,function(){
            var $this = $(this);
            $.ajax({
                url:&quot;Data/info.php&quot;,
                dataType:&quot;json&quot;,
                success:function(data){
                    $this.attr(&quot;disabled&quot;,&quot;true&quot;);
                    $(&quot;ul&quot;).append(&quot;&lt;li&gt;我的名字叫：&quot; + data.name + &quot;&lt;/li&gt;&quot;);
                    $(&quot;ul&quot;).append(&quot;&lt;li&gt;常常有人对我说：&quot; + data.say + &quot;&lt;/li&gt;&quot;);
                }
            });
        })
    });
&lt;/script&gt;
</code></pre>

                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li>
                <p><strong>serialize()方法</strong></p>
                <ul>
                    <li>
                        <p>解释</p>
                        <ul>
                            <li>serialize() 方法通过序列化表单值，创建 URL 编码文本字符串</li>
                            <li>您可以选择一个或多个表单元素（比如 input 及/或 文本框），或者 form 元素本身</li>
                            <li>序列化的值可在生成 AJAX 请求时用于 URL 查询字符串中</li>
                        </ul>
                    </li>
                    <li>
                        <p>语法：<code>$(selector).serialize()</code></p>
                    </li>
                    <li>
                        详细说明
                        <ul>
                            <li><code>.serialize()</code> 方法创建以标准 URL 编码表示的文本字符串。它的操作对象是代表表单元素集合的 jQuery 对象</li>
                        </ul>
                    </li>
                    <li>
                        <p>例</p>
                        <ul>
                            <li>
                                <p><code>.serialize()</code> 方法可以操作已选取个别表单元素的 jQuery 对象，比如 <code>&lt;input&gt;</code>, <code>&lt;textarea&gt;</code> 以及 <code>&lt;select&gt;</code>。不过，选择 <code>&lt;form&gt;</code> 标签本身进行序列化一般更容易些</p>
<pre><code>$('form').submit(function() {
  alert($(this).serialize());
  return false;
});
</code></pre>

                            </li>
                            <li>
                                <p><strong>NOTICE：</strong> 只会将”成功的控件“序列化为字符串。如果不使用按钮来提交表单，则不对提交按钮的值序列化。如果要表单元素的值包含到序列字符串中，元素必须使用 name 属性。</p>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>