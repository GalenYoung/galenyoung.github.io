---
layout: pgm-into
title: Git学习笔记
css: <link rel="stylesheet" type="text/css" href="../programme/pgm-page16/pgm-page16.css">
permalink: /programme/16
---
<h1>Git学习笔记</h1>
<ul>
    <li>
        <p>命令： </p>
        <ul>
            <li><code>mkdir</code> - 创建文件夹</li>
            <li><code>cd</code> - 进入文件夹</li>
            <li><code>cd ..</code> - 退到上一级命令</li>
            <li><code>pwd</code> - 显示当前目录</li>
            <li>
                <p><code>ls</code> -  显示当前目录的内容</p>
            </li>
            <li>
                <p><code>git init</code> - 命令将这个文件夹变成git可以管理的仓库</p>
            </li>
            <li><code>git add &lt;filename&gt;</code> - 把文件添加到暂存区</li>
            <li><code>git add .</code> - 把所有文件添加到暂存区</li>
            <li><code>git commit -m &quot;说明文件&quot;</code> - 创建版本提交到仓库</li>
            <li><code>git status</code> - 查看仓库当前的状态</li>
            <li><code>git diff</code> - 查看仓库有什么改动</li>
            <li><code>git log</code> - 显示从最近到最远提交的日志</li>
            <li><code>git log</code> --pretty=oneline  - 更见清晰，方便查看</li>
            <li><code>rm filename</code> - 删除文件</li>
            <li>查看分支：<code>git branch</code></li>
            <li>创建分支：<code>git branch &lt;name&gt;</code></li>
            <li>切换分支：<code>git checkout &lt;name&gt;</code></li>
            <li>创建+切换分支：<code>git checkout -b &lt;name&gt;</code></li>
            <li>合并某分支到当前分支：<code>git merge &lt;name&gt;</code></li>
            <li>删除分支：<code>git branch -d &lt;name&gt;</code></li>
        </ul>
    </li>
    <li>
        版本回退
        <ul>
            <li>在Git中，用<code>HEAD</code>表示当前版本，上一个版本就是<code>HEAD^</code>，上上一个版本就是<code>HEAD^^</code>，当然往上<code>100</code>个版本写100个^比较容易数不过来，所以写成<code>HEAD~100</code>。</li>
            <li><code>git reset --hard HEAD^</code> - 回退到上一个版本</li>
            <li><code>git reset --hard  &lt;版本号&gt;</code> - 回到到版本号的这个版本</li>
            <li><code>git reflog</code> - 显示记录你的每一条命令，方便你如果忘记新版法回到新版本的状况</li>
        </ul>
    </li>
    <li>
        工作区和暂存区
        <ul>
            <li><code>git add</code>就是把工作区的内容提交到缓存区</li>
            <li>
                <code>git commit</code>就是把缓存区的内容提交到版本库中
                <ul>
                    <li><code>git commit</code>只负责把暂存区的修改提交了</li>
                </ul>
            </li>
        </ul>
    </li>
    <li>
        撤销修改
        <ul>
            <li>
                只在工作区的修改
                <ul>
                    <li>
                        <code>git checkout -- filename</code> 丢弃该文件在<code>工作区</code>的修改，无法作用于add到暂存区的内容
                        <ul>
                            <li>一种情况：文件自修改后还没有被放到暂存区，现在，撤销修改就回到和版本库一模一样的状态；</li>
                            <li>另一种情况：文件已经提交到暂存区后，有作了修改，现在撤销修改就回到添加到暂存区后的状态。</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li>
                已经提交到暂存区的修改，在commit之前（共分为俩步）
                <ul>
                    <li><code>git reset HEAD fliename</code>可以把暂存区的修改撤销掉（unstage），重新放回工作区</li>
                    <li>回到工作区后，使用<code>git checkout -- filename</code>将更改在工作区删除</li>
                </ul>
            </li>
        </ul>
    </li>
    <li>
        删除文件
        <ul>
            <li>可以使用命令<code>rm filename</code> 删除文件</li>
            <li>然后使用<code>git commit -m &quot;说明文件&quot;</code>提交到版本库</li>
            <li>如果不小心删错了，可以使用<code>git checkout -- 删除文件名</code>恢复</li>
        </ul>
    </li>
    <li>
        <p>远程仓库</p>
        <ul>
            <li>
                <p>链接github</p>
                <ul>
                    <li>不要忘记把电脑上的公钥放到github账号上的ssh上</li>
                    <li>
                        <p>犯了一个严重错误，一直提示连接不到远程数据库</p>
                        <ul>
                            <li>
                                解决办法：
                                <ul>
                                    <li>使用 <code>git clone &lt;URL of the repository&gt;</code>将库克隆到本地之后，可以push到github上</li>
                                </ul>
                            </li>
                            <li>
                                操作方法
                                <ul>
                                    <li>
                                        首先要关联一个远程库，使用命令<code>git remote add origin git@server-name:path/repo-name.git</code>
                                        <ul>
                                            <li>
                                                eq: <code>git remote add origin git @github.com:galenyoung/learngit.git</code>
                                                <ul>
                                                    <li>origin是个人起的远程库名称，也可以起别的名字</li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </li>
                                    <li>关联之后使用 <code>git push -u origin master</code>第一次推送master分支上所有的内容</li>
                                    <li>
                                        之后每次提交 就可以使用<code>git push origin master</code>推送最新的修改
                                        <ul>
                                            <li>
                                                <code>git push 远程服务器的库名 要推送的分支名</code>
                                                <ul>
                                                    <li>eq: <code>git push origin dev</code></li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li>由于远程库是空的，我们第一次推送master分支时，加上了-u参数，Git不但会把本地的master分支内容推送的远程新的master分支，还会把本地的master分支和远程的master分支关联起来，在以后的推送或者拉取时就可以简化命令。</li>
                            <li><code>git remote</code> 查看远程库信息</li>
                            <li>
                                <p><code>git remote -v</code> 显示更详细的信息</p>
<pre><code>$ git remote -v
    origin  https://github.com/usename/learngit.git (fetch)
    origin  https://github.com/usename/learngit.git (push)
    //上面显示了可以抓取和推送的origin的地址。如果没有推送权限，就看不到push的地址
</code></pre>

                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li>
                <p>从远程库克隆 </p>
                <ul>
                    <li>
                        <code>git clone + &lt;link&gt;</code>
                        <ul>
                            <li>
                                eq:
                                <ul>
                                    <li>'git clone git@github.com:galenyoung/learngit.git'</li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li>
                        默认情况下，克隆后只能看到本地master分支
                        <ul>
                            <li>
                                假设需要在在dev分支上开发的话，就需要使用命令
                                <ul>
                                    <li><code>git checkout -b dev origin/dev</code>	</li>
                                </ul>
                            </li>
                            <li>
                                更改完代码，推送
                                <ul>
                                    <li><code>git push origin branch-name</code>推送自己的修改</li>
                                </ul>
                            </li>
                            <li>
                                如果推送失败，则因为远程分支比你的本地更新，需要先用git pull试图合并
                                <ul>
                                    <li>
                                        <code>git pull</code>
                                        <ul>
                                            <li>如果git pull提示<code>no tracking information</code>，则说明本地分支和远程分支的链接关系没有创建，用命令<code>git branch --set-upstream branch-name origin/branch-name</code></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li>如果合并有冲突，则解决冲突，并在本地提交</li>
                            <li>没有冲突或者解决掉冲突后，再用git push origin branch-name推送就能成功</li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
    </li>
    <li>
        分支管理
        <ul>
            <li>
                创建与合并分支
                <ul>
                    <li><code>master</code> 是主分支</li>
                    <li>
                        创建dev分支，然后切换到dev分支
                        <ul>
                            <li>
                                <code>git checkout -b dev</code> - 表示创建并切换，相当于以下俩个命令
                                <ul>
                                    <li><code>git branch dev</code> - <code>git branch</code>创建分支</li>
                                    <li><code>git checkout dev</code> - <code>git checkout</code>切换分支</li>
                                </ul>
                            </li>
                            <li><code>git branch</code> - 查看当前分支</li>
                            <li>
                                把<code>dev</code>分支上的工作合并到<code>master</code>分支上
                                <ul>
                                    <li><code>git merge dev</code> - <code>git merge</code>命令用于合并指定分支到当前分支</li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li>
                删除分支
                <ul>
                    <li><code>git branch -d dev</code> - 要在其它分支上操作</li>
                    <li>如果要丢弃一个没有被合并过的分支，可以通过<code>git branch -D 分支名</code>强行删除</li>
                </ul>
            </li>
            <li>
                解决冲突
                <ul>
                    <li>t用&lt;&lt;&lt;&lt;&lt;&lt;&lt;，=======，&gt;&gt;&gt;&gt;&gt;&gt;&gt;标记出不同分支的内容</li>
                    <li>用<code>git log --graph</code>命令可以看到分支合并图</li>
                    <li>git log --graph --pretty=oneline --abbrev-commit 查看一下分支合并</li>
                </ul>
            </li>
            <li>
                分支合并分为快速合并与普通合并两种模式
                <ul>
                    <li>
                        普通合并 - 合并后的历史有分支记录，能看出来曾经做过合并
                        <ul>
                            <li>使用普通方法合并dev分支 <code>git merge --no-ff -m &quot;merge with no-ff&quot; dev</code></li>
                        </ul>
                    </li>
                    <li>快速合并 - 而快速合并就看不出来曾经做过合并</li>
                </ul>
            </li>
        </ul>
    </li>
    <li>
        储藏
        <ul>
            <li><code>git stash</code> - 把现在的工作内容存储起来</li>
            <li><code>git stash list</code> - 查看 </li>
            <li>
                恢复
                <ul>
                    <li><code>git stash apply</code> - 恢复后stash内容并不删除，还需要命令<code>git stash drop</code>来删除</li>
                    <li><code>git stash pop</code> 恢复的同时把stash内容也删了</li>
                    <li>你可以多次stash，恢复的时候，先用git stash list查看，然后恢复指定的stash - <code>git stash apply stash@{0}</code></li>
                </ul>
            </li>
        </ul>
    </li>
    <li>
        <p>标签管理</p>
        <ul>
            <li>发布一个版本时，我们通常先在版本库中打一个标签，这样，就唯一确定了打标签时刻的版本。将来无论什么时候，取某个标签的版本，就是把那个打标签的时刻的历史版本取出来。所以，标签也是版本库的一个快照。</li>
            <li>Git的标签虽然是版本库的快照，但其实它就是指向某个commit的指针（跟分支很像对不对？但是分支可以移动，标签不能移动），所以，创建和删除标签都是瞬间完成的。</li>
            <li>
                创建标签
                <ul>
                    <li>首先，切换到需要打标签的分支上</li>
                    <li>
                        然后，敲命令<code>git tag &lt;name&gt;</code>就可以打一个新标签
                        <ul>
                            <li><code>git tag v1.0</code></li>
                        </ul>
                    </li>
                    <li>可以用命令<code>git tag</code>查看所有标签</li>
                    <li>
                        默认标签是打在最新提交的commit上,如果要给之前的版本打标签
                        <ul>
                            <li>先用<code>git log --pretty=oneline --abbrev-commit</code>查看要打标签的commit的id</li>
                            <li>
                                然后使用命令<code>git tag &lt;name&gt; id</code>
                                <ul>
                                    <li>eq: <code>git tag v0.9 6224937</code></li>
                                </ul>
                            </li>
                            <li>标签不是按时间顺序列出，而是按字母排序的。可以用<code>git show &lt;tagname&gt;</code>查看标签信息</li>
                            <li>
                                还可以创建带有说明的标签，用<code>-a</code>指定标签名，<code>-m</code>指定说明文字
                                <ul>
                                    <li>eq: <code>git tag -a v0.1 -m &quot;version 0.1 released&quot; 3628164</code></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li>
                        操作标签
                        <ul>
                            <li>eq:<code>git tag -d v0.1</code></li>
                            <li>
                                如果要推送某个标签到远程，使用命令<code>git push origin &lt;tagname&gt;</code>
                                <ul>
                                    <li>eq:<code>git push origin v1.0</code></li>
                                </ul>
                            </li>
                            <li>
                                一次性推送全部尚未推送到远程的本地标签
                                <ul>
                                    <li><code>git push origin --tags</code></li>
                                </ul>
                            </li>
                            <li>
                                如果标签已经推送到远程
                                <ul>
                                    <li>先从本地删除 eq:<code>git tag -d v0.9</code></li>
                                    <li>
                                        然后，从远程删除。删除命令也是push
                                        <ul>
                                            <li>eq:<code>git push origin :refs/tags/v0.9</code></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
    </li>
    <li>
        <p>忽略特殊文件</p>
        <ul>
            <li>在Git工作区的根目录下创建一个特殊的<code>.gitignore</code>文件，然后把要忽略的文件名填进去，Git就会自动忽略这些文件</li>
            <li>
                忽略文件的原则
                <ul>
                    <li>忽略操作系统自动生成的文件，比如缩略图等；</li>
                    <li>忽略编译生成的中间文件、可执行文件等，也就是如果一个文件是通过另一个文件自动生成的，那自动生成的文件就没必要放进版本库，比如Java编译产生的.class文件；</li>
                    <li>忽略你自己的带有敏感信息的配置文件，比如存放口令的配置文件。</li>
                </ul>
            </li>
            <li>
                .gitignore文件本身要放到版本库里，并且可以对.gitignore做版本管理
                <ul>
                    <li>将<code>.gitignore</code>放在自身文件中不起任何作用，还是要添加到版本库中</li>
                </ul>
            </li>
        </ul>
    </li>
    <li>
        <p>注意事项：</p>
        <ul>
            <li>在使用git时，要注意确保目录名不包含中文</li>
            <li>git仓库中隐藏的文件夹.git千万不要乱动，以免给git仓库破坏了</li>
            <li>图片，视频等只能知道文件大小的改变，word的格式由于是二进制的，所以git也无法跟踪其变化</li>
            <li>最好使用utf-8的编码格式</li>
        </ul>
    </li>
    <!--<li>-->
        <!--参考链接-->
        <!--<ul>-->
            <!--<li><a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000">廖雪峰 git教程</a></li>-->
            <!--<li><a href="http://www.oschina.net/question/31384_157479">Git 分支管理详解</a></li>-->
        <!--</ul>-->
    <!--</li>-->
</ul>